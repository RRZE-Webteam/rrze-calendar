(()=>{"use strict";var e={n:n=>{var a=n&&n.__esModule?()=>n.default:()=>n;return e.d(a,{a}),a},d:(n,a)=>{for(var l in a)e.o(a,l)&&!e.o(n,l)&&Object.defineProperty(n,l,{enumerable:!0,get:a[l]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.wp.blocks,a=window.wp.i18n,l=window.wp.blockEditor,r=window.wp.serverSideRender;var t=e.n(r);const o=window.wp.components,s=window.wp.element,c=window.wp.data,i=window.wp.coreData,d=window.ReactJSXRuntime,u=JSON.parse('{"UU":"rrze-calendar/calendar"}'),p=(0,d.jsx)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",children:(0,d.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm.5 16c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5V7h15v12zM9 10H7v2h2v-2zm0 4H7v2h2v-2zm4-4h-2v2h2v-2zm4 0h-2v2h2v-2zm-4 4h-2v2h2v-2zm4 0h-2v2h2v-2z"})});(0,n.registerBlockType)(u.UU,{icon:p,edit:function({attributes:e,setAttributes:n}){const r=(0,l.useBlockProps)(),[u,p]=(0,s.useState)(e.layout||"calendar-full"),{abonnementLink:_}=e,{pageLink:v}=e,{pageLinkLabel:h}=e,{numEvents:g}=e,[x,m]=(0,s.useState)(e.selectedCategories||[]),[b,w]=(0,s.useState)(e.selectedTags||[]),{includeEvents:z}=e,{excludeEvents:C}=e,j=(0,c.useSelect)(e=>e(i.store).getEntityRecords("postType","page",{per_page:-1}),[]),y=j?j.map(e=>({label:e.title.rendered||(0,a.__)("(No title)","rrze-calendar"),value:e.id})):[],k=(0,c.useSelect)(e=>e("core").getEntityRecords("taxonomy","rrze-calendar-category",{per_page:-1})||[],[]),L=k?k.map(e=>({label:e.name,value:e.slug})):[],f=(0,c.useSelect)(e=>e("core").getEntityRecords("taxonomy","rrze-calendar-tag",{per_page:-1})||[],[]),E=f?f.map(e=>({label:e.name,value:e.slug})):[];return(0,d.jsxs)("div",{...r,children:[(0,d.jsxs)(l.InspectorControls,{children:[(0,d.jsxs)(o.PanelBody,{title:(0,a.__)("Layout","rrze-calendar"),children:[(0,d.jsx)(o.SelectControl,{label:(0,a.__)("Layout","rrze-calendar"),value:u,options:[{label:(0,a.__)("Event List","rrze-calendar"),value:"teaser"},{label:(0,a.__)("Event List Short","rrze-calendar"),value:"list"},{label:(0,a.__)("Calendar Full","rrze-calendar"),value:"full"},{label:(0,a.__)("Calendar Mini","rrze-calendar"),value:"mini"}],onChange:e=>{p(e),n({layout:e})}}),("teaser"===u||"list"===u)&&(0,d.jsx)(o.TextControl,{label:(0,a.__)("Count","rrze-calendar"),type:"number",min:0,step:1,value:g,onChange:e=>{const a=parseInt(e,10);!isNaN(a)&&a>=-1?n({numEvents:a}):n({numEvents:""})},help:(0,a.__)("How many events do you want to show? Default: 10","rrze-calendar")}),(0,d.jsx)(o.ToggleControl,{__nextHasNoMarginBottom:!0,checked:!!_,label:(0,a.__)("ICS Link","rrze-calendar"),help:(0,a.__)("Show link to ICS file","rrze-calendar"),onChange:()=>n({abonnementLink:!_})}),(0,d.jsx)(o.ComboboxControl,{label:(0,a.__)("Page Link","rrze-calendar"),options:y,onChange:e=>{n({pageLink:e})},help:(0,a.__)("Link to all events page","rrze-calendar")}),""!==v&&(0,d.jsx)(o.TextControl,{label:(0,a.__)("Page Link Label","rrze-calendar"),type:"text",value:h,onChange:e=>{n({pageLinkLabel:e})},help:(0,a.__)("Link text","rrze-calendar")})]}),(0,d.jsxs)(o.PanelBody,{title:(0,a.__)("Select Events","rrze-calendar"),children:[(0,d.jsx)(o.ComboboxControl,{label:(0,a.__)("Categories","rrze-calendar"),options:L,onChange:e=>{if(!x.includes(e)){const a=[...x,e];m(a),n({selectedCategories:a})}}}),(0,d.jsxs)("div",{style:{marginTop:"10px"},children:[(0,a.__)("Selected Categories","rrze-calendar"),":",(0,d.jsx)("ul",{children:x.map(e=>{const l=k.find(n=>n.slug===e);return(0,d.jsxs)("li",{children:[l?.name,(0,d.jsx)("button",{onClick:()=>(e=>{const a=x.filter(n=>n!==e);m(a),n({selectedCategories:a})})(e),style:{marginLeft:"5px"},children:(0,a.__)("Remove","rrze-calendar")})]},e)})})]}),(0,d.jsx)("hr",{}),(0,d.jsx)(o.ComboboxControl,{label:(0,a.__)("Tags","rrze-calendar"),options:E,onChange:e=>{if(!b.includes(e)){const a=[...b,e];w(a),n({selectedTags:a})}}}),(0,d.jsxs)("div",{style:{marginTop:"10px"},children:[(0,a.__)("Selected Tags","rrze-calendar"),":",(0,d.jsx)("ul",{children:b.map(e=>{const l=f.find(n=>n.slug===e);return(0,d.jsxs)("li",{children:[l?.name,(0,d.jsx)("button",{onClick:()=>(e=>{const a=b.filter(n=>n!==e);w(a),n({selectedTags:a})})(e),style:{marginLeft:"5px"},children:(0,a.__)("Remove","rrze-calendar")})]},e)})})]}),(0,d.jsx)("hr",{}),(0,d.jsx)(o.TextControl,{label:(0,a.__)("Include Events","rrze-calendar"),type:"text",value:z,onChange:e=>{n({includeEvents:e})},help:(0,a.__)("Only show events having these words in the title.","rrze-calendar")}),(0,d.jsx)(o.TextControl,{label:(0,a.__)("Exclude Events","rrze-calendar"),type:"text",value:C,onChange:e=>{n({excludeEvents:e})},help:(0,a.__)("Hide events having these words in the title.","rrze-calendar")})]})]}),(0,d.jsx)(t(),{block:"rrze-calendar/calendar",attributes:e})]})},save:function(){return null}})})();